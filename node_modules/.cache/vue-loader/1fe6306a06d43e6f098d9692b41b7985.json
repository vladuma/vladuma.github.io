{"remainingRequest":"/Users/vladuma/Documents/Projects/portfolio_3.0/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/vladuma/Documents/Projects/portfolio_3.0/src/components/experience/timeline.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/vladuma/Documents/Projects/portfolio_3.0/src/components/experience/timeline.vue","mtime":1597070286145},{"path":"/Users/vladuma/Documents/Projects/portfolio_3.0/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vladuma/Documents/Projects/portfolio_3.0/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vladuma/Documents/Projects/portfolio_3.0/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/vladuma/Documents/Projects/portfolio_3.0/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vladuma/Documents/Projects/portfolio_3.0/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KCmNvbnN0IF8gPSByZXF1aXJlKCJ1bmRlcnNjb3JlIik7CgppbXBvcnQgVGltZWxpbmVFbGVtZW50IGZyb20gIi4vdGltZWxpbmVFbGVtZW50IjsKaW1wb3J0IGRheWpzIGZyb20gImRheWpzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVGltZWxpbmUiLAogIGNvbXBvbmVudHM6IHsKICAgIFRpbWVsaW5lRWxlbWVudAogIH0sCiAgcHJvcHM6IHsKICAgIGRhdGE6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgbWluWWVhcjogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgbWluTXRoOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBub3dZZWFyOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBub3dNdGg6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHRoaXMuZ2V0WWVhcnNBcnJheSgpCiAgICB0aGlzLmRhdGVzVG9SYW5nZSgpCiAgICB0aGlzLnNvcnREYXRhKCkKICAgIAogICAgcmV0dXJuIHsKICAgICAgY3VycmVudFN0ZXA6IHRoaXMuZ2V0Q3VycmVudFN0ZXAodGhpcy5sYXN0UmFuZ2VJbmRleCksCiAgICAgIGN1cnJlbnREYXRlOiB0aGlzLmdldEN1cnJlbnREYXRlKHRoaXMubGFzdFJhbmdlSW5kZXgpLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFllYXJzQXJyYXkoKSB7CiAgICAgICAgbGV0IHJlc3VsdCA9IFtdOwoKICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5taW5ZZWFyOyBpIDw9IHRoaXMubm93WWVhcjsgaSsrKSB7CiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGkpOwogICAgICAgIH0KICAgICAgICB0aGlzLnllYXJBcnJheSA9IHJlc3VsdDsKICAgIH0sCiAgICBzb3J0RGF0YSgpIHsKICAgICAgdGhpcy5zb3J0ZWREYXRhID0gXy5lYWNoKHRoaXMuZGF0YS5zb3J0KChhLCBiKSA9PgogICAgICAgIGRheWpzKGEuc3RhcnREYXRlKSA8IGRheWpzKGIuc3RhcnREYXRlKSA/IC0xIDogMQogICAgICApLCBlbCA9PiB7IAogICAgICAgIGVsLnN0YXJ0WWVhciA9IGRheWpzKGVsLnN0YXJ0RGF0ZSkuJHk7IAogICAgICAgIGVsLnN0YXJ0TW9udGggPSBkYXlqcyhlbC5zdGFydERhdGUpLiRNOwogICAgICAgIGVsLmVuZFllYXIgPSBlbC5lbmREYXRlICYmIGVsLmVuZERhdGUgIT09ICctJyA/IGRheWpzKGVsLmVuZERhdGUpLiR5IDogZGF5anMoKS4keTsKICAgICAgICBlbC5lbmRNb250aCA9IGVsLmVuZERhdGUgJiYgZWwuZW5kRGF0ZSAhPT0gJy0nID8gZGF5anMoZWwuZW5kRGF0ZSkuJE0gOiBkYXlqcygpLiRNOwogICAgICAgIGVsLnJhbmdlcyA9IFtdOwoKICAgICAgICBfLmVhY2godGhpcy5kYXRlUmFuZ2UsIHN0ZXAgPT4gewogICAgICAgICAgaWYoc3RlcC5tdGhJbmRleCA9PT0gZWwuc3RhcnRNb250aCAmJiBzdGVwLnllYXIgPT09IGVsLnN0YXJ0WWVhciB8fCBzdGVwLm10aEluZGV4ID09PSBlbC5lbmRNb250aCAmJiBzdGVwLnllYXIgPT09IGVsLmVuZFllYXIpIHsKICAgICAgICAgICAgZWwucmFuZ2VzLnB1c2goc3RlcC5yYW5nZUluZGV4KTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIGNvbnNvbGUubG9nKGVsKTsKICAgICAgfSkKICAgIH0sCiAgICBkYXRlc1RvUmFuZ2UoKSB7CiAgICAgICAgY29uc3QgeWVhckFycmF5ID0gdGhpcy55ZWFyQXJyYXk7CiAgICAgICAgY29uc3QgbW9udGhBcnJheSA9IFsgIkphbiIsICJGZWIiLCAiTWFyIiwgIkFwciIsICJNYXkiLCAiSnVuIiwgIkp1bCIsICJBdWciLCAiU2VwIiwgIk9jdCIsICJOb3YiLCAiRGVjIiBdOwogICAgICAgIGNvbnN0IHJhbmdlU3RlcHMgPSB5ZWFyQXJyYXkubGVuZ3RoICogbW9udGhBcnJheS5sZW5ndGg7CgogICAgICAgIGxldCByZXN1bHQgPSBbXSwKICAgICAgICAgICAgeWVhckluZGV4ID0gMCwKICAgICAgICAgICAgbXRoSW5kZXggPSAwOwoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhbmdlU3RlcHM7IGkrKykgewogICAgICAgICAgeWVhckluZGV4ID0gaSAlIG1vbnRoQXJyYXkubGVuZ3RoID09PSAwICYmIGkgIT09IDAgPyB5ZWFySW5kZXggKyAxIDogeWVhckluZGV4OwogICAgICAgICAgbXRoSW5kZXggPSBtdGhJbmRleCAhPT0gMTEgJiYgaSAhPT0gMCA/IG10aEluZGV4ICsgMSA6IDA7CgogICAgICAgICAgcmVzdWx0LnB1c2goewogICAgICAgICAgICBtdGg6IG1vbnRoQXJyYXlbbXRoSW5kZXhdLAogICAgICAgICAgICBtdGhJbmRleDogbXRoSW5kZXgsCiAgICAgICAgICAgIHllYXI6IHllYXJBcnJheVt5ZWFySW5kZXhdLAogICAgICAgICAgICByYW5nZUluZGV4OiBpCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgICB0aGlzLmRhdGVSYW5nZSA9IHJlc3VsdC5zbGljZSh0aGlzLm1pbk10aCwgcmVzdWx0Lmxlbmd0aCAtICgxMSAtIHRoaXMubm93TXRoKSk7CiAgICAgICAgdGhpcy5sYXN0UmFuZ2VJbmRleCA9IHRoaXMuZGF0ZVJhbmdlLmxlbmd0aDsKICAgICAgICBjb25zb2xlLmxvZygzLCB0aGlzLmxhc3RSYW5nZUluZGV4KTsKICAgICAgfSwKICAgICAgZ2V0Q3VycmVudFN0ZXAoeCkgewogICAgICAgIHJldHVybiB0aGlzLnNvcnRlZERhdGEuZmlsdGVyKGQgPT4gewogICAgICAgICAgcmV0dXJuIGQucmFuZ2VzWzBdIDw9IHggJiYgKGQucmFuZ2VzWzFdID8gZC5yYW5nZXNbMV0gPj0geCA6IHRydWUpOwogICAgICAgIH0pOwogICAgICB9LAogICAgICBnZXRDdXJyZW50RGF0ZSh4KSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVJhbmdlW3ggLSAxXTsKICAgICAgfSwKICAgICAgdXBkYXRlQ3VycmVudFJhbmdlKGUpIHsKICAgICAgICB0aGlzLmN1cnJlbnRTdGVwID0gdGhpcy5nZXRDdXJyZW50U3RlcChwYXJzZUludChlLnRhcmdldC52YWx1ZSkpOwogICAgICAgIHRoaXMuY3VycmVudERhdGUgPSB0aGlzLmdldEN1cnJlbnREYXRlKHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKSk7CiAgICAgICAgY29uc29sZS5sb2coMSwgdGhpcy5jdXJyZW50U3RlcCk7CiAgICAgICAgY29uc29sZS5sb2coMiwgdGhpcy5jdXJyZW50RGF0ZSk7CiAgICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["timeline.vue"],"names":[],"mappings":";;;;;;;;AAQA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"timeline.vue","sourceRoot":"src/components/experience","sourcesContent":["<template>\n  <div class=\"timeline-container\">\n    <TimelineElement :data=\"currentStep\" :date=\"currentDate\" class=\"timeline\"/>\n    <input type=\"range\" :min=\"dateRange[0].rangeIndex\" :max=\"dateRange[dateRange.length - 1].rangeIndex\" @input=\"updateCurrentRange\" />\n  </div>\n</template>\n\n<script>\nconst _ = require(\"underscore\");\n\nimport TimelineElement from \"./timelineElement\";\nimport dayjs from \"dayjs\";\n\nexport default {\n  name: \"Timeline\",\n  components: {\n    TimelineElement\n  },\n  props: {\n    data: {\n      type: Array,\n      required: true\n    },\n    minYear: {\n      type: Number,\n      required: true\n    },\n    minMth: {\n      type: Number,\n      required: true\n    },\n    nowYear: {\n      type: Number,\n      required: true\n    },\n    nowMth: {\n      type: Number,\n      required: true\n    }\n  },\n  data() {\n    this.getYearsArray()\n    this.datesToRange()\n    this.sortData()\n    \n    return {\n      currentStep: this.getCurrentStep(this.lastRangeIndex),\n      currentDate: this.getCurrentDate(this.lastRangeIndex),\n    };\n  },\n  methods: {\n    getYearsArray() {\n        let result = [];\n\n        for (let i = this.minYear; i <= this.nowYear; i++) {\n            result.push(i);\n        }\n        this.yearArray = result;\n    },\n    sortData() {\n      this.sortedData = _.each(this.data.sort((a, b) =>\n        dayjs(a.startDate) < dayjs(b.startDate) ? -1 : 1\n      ), el => { \n        el.startYear = dayjs(el.startDate).$y; \n        el.startMonth = dayjs(el.startDate).$M;\n        el.endYear = el.endDate && el.endDate !== '-' ? dayjs(el.endDate).$y : dayjs().$y;\n        el.endMonth = el.endDate && el.endDate !== '-' ? dayjs(el.endDate).$M : dayjs().$M;\n        el.ranges = [];\n\n        _.each(this.dateRange, step => {\n          if(step.mthIndex === el.startMonth && step.year === el.startYear || step.mthIndex === el.endMonth && step.year === el.endYear) {\n            el.ranges.push(step.rangeIndex);\n          }\n        })\n        console.log(el);\n      })\n    },\n    datesToRange() {\n        const yearArray = this.yearArray;\n        const monthArray = [ \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\" ];\n        const rangeSteps = yearArray.length * monthArray.length;\n\n        let result = [],\n            yearIndex = 0,\n            mthIndex = 0;\n\n        for (let i = 0; i < rangeSteps; i++) {\n          yearIndex = i % monthArray.length === 0 && i !== 0 ? yearIndex + 1 : yearIndex;\n          mthIndex = mthIndex !== 11 && i !== 0 ? mthIndex + 1 : 0;\n\n          result.push({\n            mth: monthArray[mthIndex],\n            mthIndex: mthIndex,\n            year: yearArray[yearIndex],\n            rangeIndex: i\n          })\n        }\n        this.dateRange = result.slice(this.minMth, result.length - (11 - this.nowMth));\n        this.lastRangeIndex = this.dateRange.length;\n        console.log(3, this.lastRangeIndex);\n      },\n      getCurrentStep(x) {\n        return this.sortedData.filter(d => {\n          return d.ranges[0] <= x && (d.ranges[1] ? d.ranges[1] >= x : true);\n        });\n      },\n      getCurrentDate(x) {\n        return this.dateRange[x - 1];\n      },\n      updateCurrentRange(e) {\n        this.currentStep = this.getCurrentStep(parseInt(e.target.value));\n        this.currentDate = this.getCurrentDate(parseInt(e.target.value));\n        console.log(1, this.currentStep);\n        console.log(2, this.currentDate);\n      }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n.timeline-container {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    min-height: 200px;\n    max-height: 100%;\n\n    @media screen and (max-width: 768px) {\n      flex-direction: column-reverse;\n    }\n\n    .timeline {\n        display: flex;\n    }\n    input[type=range] {\n      width: 90%;\n      // margin: 21px 0 7px;\n      padding-top: 10px;\n      background-color: transparent;\n      -webkit-appearance: none;\n    }\n    input[type=range]:focus {\n      outline: none;\n    }\n    input[type=range]::-webkit-slider-runnable-track {\n      background: #000000;\n      border: 0.2px solid #000000;\n      border-radius: 1.3px;\n      width: 100%;\n      height: 2px;\n      cursor: pointer;\n    }\n    input[type=range]::-webkit-slider-thumb {\n      margin-top: -5.5px;\n      width: 10px;\n      height: 10px;\n      background: #000000;\n      border: 1px solid #000000;\n      border-radius: 100%;\n      cursor: pointer;\n      -webkit-appearance: none;\n    }\n    input[type=range]:focus::-webkit-slider-runnable-track {\n      background: #0d0d0d;\n    }\n    input[type=range]::-moz-range-track {\n      background: #000000;\n      border: 0.2px solid #000000;\n      border-radius: 1.3px;\n      width: 100%;\n      height: 2px;\n      cursor: pointer;\n    }\n    input[type=range]::-moz-range-thumb {\n      width: 10px;\n      height: 10px;\n      background: #000000;\n      border: 1px solid #000000;\n      border-radius: 100%;\n      cursor: pointer;\n    }\n    input[type=range]::-ms-track {\n      background: transparent;\n      border-color: transparent;\n      border-width: 7.5px 0;\n      color: transparent;\n      width: 100%;\n      height: 2px;\n      cursor: pointer;\n    }\n    input[type=range]::-ms-fill-lower {\n      background: #000000;\n      border: 0.2px solid #000000;\n      border-radius: 2.6px;\n    }\n    input[type=range]::-ms-fill-upper {\n      background: #000000;\n      border: 0.2px solid #000000;\n      border-radius: 2.6px;\n    }\n    input[type=range]::-ms-thumb {\n      width: 10px;\n      height: 10px;\n      background: #000000;\n      border: 1px solid #000000;\n      border-radius: 100%;\n      cursor: pointer;\n      margin-top: 0px;\n      /*Needed to keep the Edge thumb centred*/\n    }\n    input[type=range]:focus::-ms-fill-lower {\n      background: #000000;\n    }\n    input[type=range]:focus::-ms-fill-upper {\n      background: #0d0d0d;\n    }\n    /*TODO: Use one of the selectors from https://stackoverflow.com/a/20541859/7077589 and figure out\n    how to remove the virtical space around the range input in IE*/\n    @supports (-ms-ime-align:auto) {\n      /* Pre-Chromium Edge only styles, selector taken from hhttps://stackoverflow.com/a/32202953/7077589 */\n      input[type=range] {\n        margin: 0;\n        /*Edge starts the margin from the thumb, not the track as other browsers do*/\n      }\n    }\n\n}\n</style>"]}]}